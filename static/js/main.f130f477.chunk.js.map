{"version":3,"sources":["index.js"],"names":["App","state","width","window","innerWidth","height","innerHeight","detectFrame","video","model","detect","then","predictions","renderPredictions","requestAnimationFrame","ctx","document","getElementById","getContext","clearRect","canvas","font","textBaseline","forEach","prediction","x","bbox","y","strokeStyle","lineWidth","strokeRect","fillStyle","textWidth","measureText","class","textHeight","parseInt","fillRect","fillText","this","webCamPromise","navigator","mediaDevices","getUserMedia","audio","facingMode","stream","srcObject","Promise","resolve","reject","onloadedmetadata","play","modelPromise","cocoSsd","all","values","console","log","className","query","maxWidth","matches","params","id","React","Component","rootElement","ReactDOM","render"],"mappings":"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","file":"static/js/main.f130f477.chunk.js","sourcesContent":["import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Particles from 'react-particles-js';\nimport * as cocoSsd from \"@tensorflow-models/coco-ssd\";\nimport Media from 'react-media';\nimport \"@tensorflow/tfjs\";\nimport \"./index.css\";\n\nclass App extends React.Component {\n  state = { width: window.innerWidth, height: window.innerHeight }\n\n\n  componentDidMount() {\n    if(this.state.width <= 480 ){\n      const video = document.getElementById(\"video\");\n      const webCamPromise = navigator.mediaDevices\n        .getUserMedia({\n          audio: false,\n          video: {\n            facingMode: \"user\",\n            width: this.state.width,\n            height: this.state.height\n          }\n        })\n        .then(stream => {\n          video.srcObject = stream;\n          return new Promise((resolve, reject) => {\n            video.onloadedmetadata = () => {\n              video.play();\n              resolve();\n            };\n          });\n        });\n      const modelPromise = cocoSsd.load();\n      Promise.all([modelPromise, webCamPromise]).then(values => {\n        this.detectFrame(video, values[0]);\n      });\n      console.log(\"SMALL DEVICE\")\n      console.log(this.state.width)\n      console.log(this.state.height)\n    }else{\n      const video = document.getElementById(\"video\");\n      const webCamPromise = navigator.mediaDevices\n        .getUserMedia({\n          audio: false,\n          video: {\n            facingMode: \"user\",\n            width: this.state.width,\n            height: this.state.height / 1.1\n          }\n        })\n        .then(stream => {\n          video.srcObject = stream;\n          return new Promise((resolve, reject) => {\n            video.onloadedmetadata = () => {\n              video.play();\n              resolve();\n            };\n          });\n        });\n      const modelPromise = cocoSsd.load();\n      Promise.all([modelPromise, webCamPromise]).then(values => {\n        this.detectFrame(video, values[0]);\n      });\n      console.log(\"LARGE DEVICE\")\n      console.log(this.state.width)\n      console.log(this.state.height)\n    }\n\n  }\n\n  detectFrame = (video, model) => {\n    model.detect(video).then(predictions => {\n      this.renderPredictions(predictions);\n      requestAnimationFrame(() => {\n        this.detectFrame(video, model);\n      });\n    });\n  };\n\n  renderPredictions = predictions => {\n    const c = document.getElementById(\"canvas\");\n    const ctx = c.getContext(\"2d\");\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n    // Font options.\n    const font = \"25px Noto Sans\";\n    ctx.font = font;\n    ctx.textBaseline = \"top\";\n    predictions.forEach(prediction => {\n      const x = prediction.bbox[0];\n      const y = prediction.bbox[1];\n      const width = prediction.bbox[2];\n      const height = prediction.bbox[3];\n      // Draw the bounding box.\n      ctx.strokeStyle = \"#e74c3c\";\n      ctx.lineWidth = 4;\n      ctx.strokeRect(x, y, width, height);\n      // Draw the label background.\n      ctx.fillStyle = \"#e74c3c\";\n      const textWidth = ctx.measureText(prediction.class).width;\n      const textHeight = parseInt(font, 20); // base 10\n      ctx.fillRect(x, y, textWidth + 4, textHeight + 4);\n    });\n\n    predictions.forEach(prediction => {\n      const x = prediction.bbox[0];\n      const y = prediction.bbox[1];\n      // Draw the text last to ensure it's on top.\n      ctx.fillStyle = \"#FFFFFF\";\n      ctx.fillText(prediction.class, x, y);\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"container\">\n        <Media query={{ maxWidth: 480 }}>\n          {matches => matches ? (\n            <div>\n              <Particles\n                params={{\n                  \"particles\": {\n                    \"number\": {\n                      \"value\": 160,\n                      \"density\": {\n                        \"enable\": false\n                      }\n                    },\n                    \"color\": {\n                      \"value\": [\"#f1c40f\", \"#B8E986\", \"#50E3C2\", \"#FFD300\", \"#E86363\", \"#e74c3c\"]\n                    },\n                    \"shape\": {\n                      \"type\": \"circle\",\n                      \"stroke\": {\n                        \"width\": 0,\n                        \"color\": \"#e74c3c\"\n                      }\n                    },\n                    \"size\": {\n                      \"value\": 3,\n                      \"random\": true,\n                      \"anim\": {\n                        \"speed\": 4,\n                        \"size_min\": 0.3\n                      }\n                    },\n                    \"line_linked\": {\n                      \"enable\": false\n                    },\n                    \"move\": {\n                      \"random\": true,\n                      \"speed\": 1,\n                      \"direction\": \"top\",\n                      \"out_mode\": \"out\"\n                    }\n                  },\n                  \"interactivity\": {\n                    \"events\": {\n                      \"onhover\": {\n                        \"enable\": true,\n                        \"mode\": \"bubble\"\n                      },\n                      \"onclick\": {\n                        \"enable\": true,\n                        \"mode\": \"repulse\"\n                      }\n                    },\n                    \"modes\": {\n                      \"bubble\": {\n                        \"distance\": 250,\n                        \"duration\": 2,\n                        \"size\": 0,\n                        \"opacity\": 0\n                      },\n                      \"repulse\": {\n                        \"distance\": 400,\n                        \"duration\": 4\n                      }\n                    }\n                  }\n                }} />\n              <video id=\"video\" className=\"higher\" width={this.state.width} height={this.state.height} />\n              <canvas id=\"canvas\" className=\"higher\" width={this.state.width} height={this.state.height} />\n            </div>\n          ) : (\n\n              <div>\n                <Particles\n                  params={{\n                    \"particles\": {\n                      \"number\": {\n                        \"value\": 160,\n                        \"density\": {\n                          \"enable\": false\n                        }\n                      },\n                      \"color\": {\n                        \"value\": [\"#f1c40f\", \"#B8E986\", \"#50E3C2\", \"#FFD300\", \"#E86363\", \"#e74c3c\"]\n                      },\n                      \"shape\": {\n                        \"type\": \"circle\",\n                        \"stroke\": {\n                          \"width\": 0,\n                          \"color\": \"#e74c3c\"\n                        }\n                      },\n                      \"size\": {\n                        \"value\": 3,\n                        \"random\": true,\n                        \"anim\": {\n                          \"speed\": 4,\n                          \"size_min\": 0.3\n                        }\n                      },\n                      \"line_linked\": {\n                        \"enable\": false\n                      },\n                      \"move\": {\n                        \"random\": true,\n                        \"speed\": 1,\n                        \"direction\": \"top\",\n                        \"out_mode\": \"out\"\n                      }\n                    },\n                    \"interactivity\": {\n                      \"events\": {\n                        \"onhover\": {\n                          \"enable\": true,\n                          \"mode\": \"bubble\"\n                        },\n                        \"onclick\": {\n                          \"enable\": true,\n                          \"mode\": \"repulse\"\n                        }\n                      },\n                      \"modes\": {\n                        \"bubble\": {\n                          \"distance\": 250,\n                          \"duration\": 2,\n                          \"size\": 0,\n                          \"opacity\": 0\n                        },\n                        \"repulse\": {\n                          \"distance\": 400,\n                          \"duration\": 4\n                        }\n                      }\n                    }\n                  }} />\n                <video id=\"video\" className=\"higher\" width={this.state.width} height={this.state.height / 1.1} />\n                <canvas id=\"canvas\" className=\"higher\" width={this.state.width} height={this.state.height / 1.1} />\n              </div>\n            )\n          }\n        </Media>\n      </div>\n    );\n  }\n}\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(<App />, rootElement);\n"],"sourceRoot":""}